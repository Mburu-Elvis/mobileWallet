var app=angular.module("myApp",["ngRoute"]);app.controller("MainController",function(e,o,n){e.user=n.getUser(),e.balance=e.user.balance,e.isLoggedIn=function(){return n.isAuthenticated()},e.logout=function(){n.clearUser(),console.log("User cleared"),o.path("/signin")},e.isSignIn=function(){return"/SignIn"===o.path()},e.isRegister=function(){return"/"===o.path()},e.hideSidebar=function(){return e.isSignIn()||e.isRegister()}}),app.config(function(e){e.when("/",{templateUrl:"register.html",controller:"RegisterController"}).when("/SignIn",{templateUrl:"signIn.html",controller:"RegisterController"}).when("/Account",{templateUrl:"account.html",controller:"AccountController"}).when("/Transactions",{templateUrl:"transactions.html",controller:"TransactionController"}).when("/Logout",{templateUrl:"register.html",controller:"RegisterController"}).when("/Dashboard",{templateUrl:"dashboard.html",controller:"DashboardController"}).otherwise({redirect:"/"})}),app.controller("AccountController",["$scope","$http",function(e,o){}]),app.controller("DashboardController",["$scope","$http","$route","UserService","$location",function(o,e,n,r,t){o.sendForm={},o.url="https://mobilewallet.onrender.com/api/v1",o.sendMoney=function(){o.sendForm.from=o.user.phoneNumber,console.log(o.sendForm),e({method:"POST",headers:{"ngrok-skip-browser-warning":"hello","Content-Type":"application/json"},data:o.sendForm,url:o.url+"/payments/transfer"}).then(function(e){console.log("Accounts:",e),o.refreshAccounts(),o.sendForm={}},function(e){console.error("Error fetching accounts:",e),o.sendForm={}})},o.test=function(){console.log("TEST 1")},o.depositMoney=function(){o.sendForm.from=o.user.phoneNumber,o.sendForm.to=o.user.phoneNumber,console.log("CLICKED"),e({method:"POST",headers:{"ngrok-skip-browser-warning":"hello","Content-Type":"application/json"},data:o.sendForm,url:o.url+"/payments/deposit"}).then(function(e){console.log("Accounts:",e),o.refreshAccounts(),o.sendForm={}},function(e){console.error("Error fetching accounts:",e),o.sendForm={}})},o.withdrawMoney=function(){o.sendForm.from=o.user.phoneNumber,o.sendForm.to=o.user.phoneNumber,console.log(o.sendForm),e({method:"POST",headers:{"ngrok-skip-browser-warning":"hello","Content-Type":"application/json"},data:o.sendForm,url:o.url+"/payments/withdraw"}).then(function(e){console.log("Accounts:",e),o.sendForm={}},function(e){console.error("Error fetching accounts:",e),o.sendForm={}})},o.getBalance=function(){e({method:"GET",headers:{"ngrok-skip-browser-warning":"hello","Content-Type":"application/json"},url:o.url+"/accounts/balance/"+o.user.phoneNumber}).then(function(e){console.log("Accounts:",e),o.user.balance=e.data.balance,console.log(o.user.balance)},function(e){console.error("Error fetching accounts:",e)})},o.getBalance()}]),app.controller("RegisterController",["$scope","$http","$location","UserService",function(o,e,n,r){o.registerForm={},o.url="https://mobilewallet.onrender.com/api/v1",o.register=function(){console.log(o.sendForm),e({method:"POST",headers:{"Content-Type":"application/json"},data:o.registerForm,url:o.url+"/register"}).then(function(e){o.registerForm={},n.path("/Dashboard")},function(e){console.error("Error fetching accounts:",e),o.registerForm={}})},o.signIn=function(){console.log(o.registerForm),e({method:"POST",headers:{"Content-Type":"application/json"},data:o.registerForm,url:o.url+"/signin"}).then(function(e){console.log("SignIn:",e),o.registerForm={},r.setUser(e.data),n.path("/Dashboard")},function(e){console.error("Error fetching accounts:",e),o.registerForm={}})}}]),app.controller("TransactionsController",["$scope","$http",function(e,o){}]),app.factory("UserService",function(){var o=JSON.parse(localStorage.getItem("user"))||{};return{setUser:function(e){o=e,localStorage.setItem("user",JSON.stringify(o))},getUser:function(){return o},clearUser:function(){o=null,localStorage.removeItem("user")},isAuthenticated:function(){return!!o.username}}});